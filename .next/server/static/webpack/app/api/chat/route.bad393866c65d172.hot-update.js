"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/api/chat/route",{

/***/ "(rsc)/./src/app/api/ai-support/route.ts":
/*!*****************************************!*\
  !*** ./src/app/api/ai-support/route.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var _ai_sdk_google__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ai-sdk/google */ \"(rsc)/./node_modules/.pnpm/@ai-sdk+google@3.0.10_zod@3.25.76/node_modules/@ai-sdk/google/dist/index.mjs\");\n/* harmony import */ var ai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ai */ \"(rsc)/./node_modules/.pnpm/ai@6.0.39_zod@3.25.76/node_modules/ai/dist/index.mjs\");\n/* harmony import */ var ai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ai */ \"(rsc)/./node_modules/.pnpm/@ai-sdk+provider-utils@4.0.8_zod@3.25.76/node_modules/@ai-sdk/provider-utils/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/types.js\");\n\n\n\nconst google = (0,_ai_sdk_google__WEBPACK_IMPORTED_MODULE_0__.createGoogleGenerativeAI)({\n    apiKey: process.env.GOOGLE_GEMINI_API_KEY\n});\nconst SYSTEM_PROMPT = `\nأنت مساعد ذكي متخصص في خدمات Wahag لحماية السيارات.\nأجب دائما باللغة العربية وبأسلوب احترافي ودود ومباشر.\n\nعندما يسأل المستخدم عن الخدمات أو يطلب توصيات، استخدم أداة \"showServices\" لعرض الخدمات المناسبة بشكل مرئي وجذاب.\nلا تكرر تفاصيل الخدمات في النص إذا قمت باستخدام الأداة، بل اكتفِ بمقدمة قصيرة وجذابة تدعو المستخدم للاطلاع على البطاقات المعروضة.\nإذا كان السؤال عاماً، أجب بنص فقط.\n`;\n// Helper to extract text from mixed content/parts\nconst getMessageText = (message)=>{\n    if (typeof message.content === 'string') return message.content;\n    if (Array.isArray(message.parts)) {\n        return message.parts.filter((part)=>part.type === 'text').map((part)=>part.text ?? '').join('');\n    }\n    return '';\n};\nconst runtime = 'edge';\nasync function POST(req) {\n    const { messages } = await req.json();\n    // Clean messages to ensure they are in the format expected by the SDK\n    // We keep it simple: extracting text content. \n    // In a full implementation, we should pass tool calls history correctly, \n    // but for this migration, we primarily focus on text inputs.\n    const formattedMessages = (messages ?? []).map((message)=>({\n            role: message.role,\n            content: getMessageText(message)\n        }));\n    const result = await (0,ai__WEBPACK_IMPORTED_MODULE_1__.streamText)({\n        model: google('gemini-2.5-flash'),\n        system: SYSTEM_PROMPT,\n        messages: formattedMessages,\n        temperature: 0.4,\n        tools: {\n            showServices: (0,ai__WEBPACK_IMPORTED_MODULE_2__.tool)({\n                description: 'عرض قائمة خدمات (بطاقات مرئية) للمستخدم. استخدمها عندما يطلب المستخدم تفاصيل عن الخدمات أو توصيات.',\n                parameters: zod__WEBPACK_IMPORTED_MODULE_3__.object({\n                    services: zod__WEBPACK_IMPORTED_MODULE_3__.array(zod__WEBPACK_IMPORTED_MODULE_3__[\"enum\"]([\n                        'thermalTinting',\n                        'ppf',\n                        'ceramic',\n                        'detailing'\n                    ])).describe('قائمة معرفات الخدمات التي يجب عرضها')\n                }),\n                execute: async ({ services })=>{\n                    return {\n                        services,\n                        status: 'displayed'\n                    };\n                }\n            })\n        }\n    });\n    return result.toDataStreamResponse();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9haS1zdXBwb3J0L3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUEwRDtBQUNwQjtBQUNkO0FBRXhCLE1BQU1JLFNBQVNKLHdFQUF3QkEsQ0FBQztJQUN0Q0ssUUFBUUMsUUFBUUMsR0FBRyxDQUFDQyxxQkFBcUI7QUFDM0M7QUFFQSxNQUFNQyxnQkFBZ0IsQ0FBQzs7Ozs7OztBQU92QixDQUFDO0FBRUQsa0RBQWtEO0FBQ2xELE1BQU1DLGlCQUFpQixDQUFDQztJQUN0QixJQUFJLE9BQU9BLFFBQVFDLE9BQU8sS0FBSyxVQUFVLE9BQU9ELFFBQVFDLE9BQU87SUFDL0QsSUFBSUMsTUFBTUMsT0FBTyxDQUFDSCxRQUFRSSxLQUFLLEdBQUc7UUFDaEMsT0FBT0osUUFBUUksS0FBSyxDQUNqQkMsTUFBTSxDQUFDLENBQUNDLE9BQVNBLEtBQUtDLElBQUksS0FBSyxRQUMvQkMsR0FBRyxDQUFDLENBQUNGLE9BQVNBLEtBQUtHLElBQUksSUFBSSxJQUMzQkMsSUFBSSxDQUFDO0lBQ1Y7SUFDQSxPQUFPO0FBQ1Q7QUFFTyxNQUFNQyxVQUFVLE9BQU87QUFFdkIsZUFBZUMsS0FBS0MsR0FBWTtJQUNyQyxNQUFNLEVBQUVDLFFBQVEsRUFBRSxHQUFHLE1BQU1ELElBQUlFLElBQUk7SUFFbkMsc0VBQXNFO0lBQ3RFLCtDQUErQztJQUMvQywwRUFBMEU7SUFDMUUsNkRBQTZEO0lBQzdELE1BQU1DLG9CQUFvQixDQUFDRixZQUFZLEVBQUUsRUFBRU4sR0FBRyxDQUFDLENBQUNSLFVBQWtCO1lBQ2hFaUIsTUFBTWpCLFFBQVFpQixJQUFJO1lBQ2xCaEIsU0FBU0YsZUFBZUM7UUFHMUI7SUFFQSxNQUFNa0IsU0FBUyxNQUFNNUIsOENBQVVBLENBQUM7UUFDOUI2QixPQUFPMUIsT0FBTztRQUNkMkIsUUFBUXRCO1FBQ1JnQixVQUFVRTtRQUNWSyxhQUFhO1FBQ2JDLE9BQU87WUFDTEMsY0FBY2hDLHdDQUFJQSxDQUFDO2dCQUNqQmlDLGFBQWE7Z0JBQ2JDLFlBQVlqQyx1Q0FBUSxDQUFDO29CQUNuQm1DLFVBQVVuQyxzQ0FBTyxDQUFDQSx3Q0FBTSxDQUFDO3dCQUFDO3dCQUFrQjt3QkFBTzt3QkFBVztxQkFBWSxHQUFHc0MsUUFBUSxDQUFDO2dCQUN4RjtnQkFDQUMsU0FBUyxPQUFPLEVBQUVKLFFBQVEsRUFBRTtvQkFDMUIsT0FBTzt3QkFBRUE7d0JBQVVLLFFBQVE7b0JBQVk7Z0JBQ3pDO1lBQ0Y7UUFDRjtJQUNGO0lBRUEsT0FBT2QsT0FBT2Usb0JBQW9CO0FBQ3BDIiwic291cmNlcyI6WyIvVXNlcnMvbWFobW91ZG1hYy9Qcm9qZWN0cy9hdXRvc2hpZWxkLWJyaWxsaWFuY2Uvc3JjL2FwcC9hcGkvYWktc3VwcG9ydC9yb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVHb29nbGVHZW5lcmF0aXZlQUkgfSBmcm9tICdAYWktc2RrL2dvb2dsZSc7XG5pbXBvcnQgeyBzdHJlYW1UZXh0LCB0b29sIH0gZnJvbSAnYWknO1xuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5cbmNvbnN0IGdvb2dsZSA9IGNyZWF0ZUdvb2dsZUdlbmVyYXRpdmVBSSh7XG4gIGFwaUtleTogcHJvY2Vzcy5lbnYuR09PR0xFX0dFTUlOSV9BUElfS0VZLFxufSk7XG5cbmNvbnN0IFNZU1RFTV9QUk9NUFQgPSBgXG7Yo9mG2Kog2YXYs9in2LnYryDYsNmD2Yog2YXYqtiu2LXYtSDZgdmKINiu2K/Zhdin2KogV2FoYWcg2YTYrdmF2KfZitipINin2YTYs9mK2KfYsdin2KouXG7Yo9is2Kgg2K/Yp9im2YXYpyDYqNin2YTZhNi62Kkg2KfZhNi52LHYqNmK2Kkg2YjYqNij2LPZhNmI2Kgg2KfYrdiq2LHYp9mB2Yog2YjYr9mI2K8g2YjZhdio2KfYtNixLlxuXG7YudmG2K/ZhdinINmK2LPYo9mEINin2YTZhdiz2KrYrtiv2YUg2LnZhiDYp9mE2K7Yr9mF2KfYqiDYo9mIINmK2LfZhNioINiq2YjYtdmK2KfYqtiMINin2LPYqtiu2K/ZhSDYo9iv2KfYqSBcInNob3dTZXJ2aWNlc1wiINmE2LnYsdi2INin2YTYrtiv2YXYp9iqINin2YTZhdmG2KfYs9io2Kkg2KjYtNmD2YQg2YXYsdim2Yog2YjYrNiw2KfYqC5cbtmE2Kcg2KrZg9ix2LEg2KrZgdin2LXZitmEINin2YTYrtiv2YXYp9iqINmB2Yog2KfZhNmG2LUg2KXYsNinINmC2YXYqiDYqNin2LPYqtiu2K/Yp9mFINin2YTYo9iv2KfYqdiMINio2YQg2KfZg9iq2YHZkCDYqNmF2YLYr9mF2Kkg2YLYtdmK2LHYqSDZiNis2LDYp9io2Kkg2KrYr9i52Ygg2KfZhNmF2LPYqtiu2K/ZhSDZhNmE2KfYt9mE2KfYuSDYudmE2Ykg2KfZhNio2LfYp9mC2KfYqiDYp9mE2YXYudix2YjYttipLlxu2KXYsNinINmD2KfZhiDYp9mE2LPYpNin2YQg2LnYp9mF2KfZi9iMINij2KzYqCDYqNmG2LUg2YHZgti3LlxuYDtcblxuLy8gSGVscGVyIHRvIGV4dHJhY3QgdGV4dCBmcm9tIG1peGVkIGNvbnRlbnQvcGFydHNcbmNvbnN0IGdldE1lc3NhZ2VUZXh0ID0gKG1lc3NhZ2U6IHsgY29udGVudD86IHN0cmluZzsgcGFydHM/OiBBcnJheTx7IHR5cGU6IHN0cmluZzsgdGV4dD86IHN0cmluZyB9PiB9KSA9PiB7XG4gIGlmICh0eXBlb2YgbWVzc2FnZS5jb250ZW50ID09PSAnc3RyaW5nJykgcmV0dXJuIG1lc3NhZ2UuY29udGVudDtcbiAgaWYgKEFycmF5LmlzQXJyYXkobWVzc2FnZS5wYXJ0cykpIHtcbiAgICByZXR1cm4gbWVzc2FnZS5wYXJ0c1xuICAgICAgLmZpbHRlcigocGFydCkgPT4gcGFydC50eXBlID09PSAndGV4dCcpXG4gICAgICAubWFwKChwYXJ0KSA9PiBwYXJ0LnRleHQgPz8gJycpXG4gICAgICAuam9pbignJyk7XG4gIH1cbiAgcmV0dXJuICcnO1xufTtcblxuZXhwb3J0IGNvbnN0IHJ1bnRpbWUgPSAnZWRnZSc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogUmVxdWVzdCkge1xuICBjb25zdCB7IG1lc3NhZ2VzIH0gPSBhd2FpdCByZXEuanNvbigpO1xuXG4gIC8vIENsZWFuIG1lc3NhZ2VzIHRvIGVuc3VyZSB0aGV5IGFyZSBpbiB0aGUgZm9ybWF0IGV4cGVjdGVkIGJ5IHRoZSBTREtcbiAgLy8gV2Uga2VlcCBpdCBzaW1wbGU6IGV4dHJhY3RpbmcgdGV4dCBjb250ZW50LiBcbiAgLy8gSW4gYSBmdWxsIGltcGxlbWVudGF0aW9uLCB3ZSBzaG91bGQgcGFzcyB0b29sIGNhbGxzIGhpc3RvcnkgY29ycmVjdGx5LCBcbiAgLy8gYnV0IGZvciB0aGlzIG1pZ3JhdGlvbiwgd2UgcHJpbWFyaWx5IGZvY3VzIG9uIHRleHQgaW5wdXRzLlxuICBjb25zdCBmb3JtYXR0ZWRNZXNzYWdlcyA9IChtZXNzYWdlcyA/PyBbXSkubWFwKChtZXNzYWdlOiBhbnkpID0+ICh7XG4gICAgcm9sZTogbWVzc2FnZS5yb2xlLFxuICAgIGNvbnRlbnQ6IGdldE1lc3NhZ2VUZXh0KG1lc3NhZ2UpLFxuICAgIC8vIElmIHRoZXJlIGFyZSBleGlzdGluZyB0b29sIGNhbGxzL3Jlc3VsdHMgaW4gaGlzdG9yeSwgdGhleSBzaG91bGQgYmUgcHJlc2VydmVkLFxuICAgIC8vIGJ1dCB0aGUgcHJldmlvdXMgaW1wbGVtZW50YXRpb24gZGlkbid0IHVzZSBuYXRpdmUgdG9vbHMsIHNvIHdlIGxpa2VseSBqdXN0IGhhdmUgdGV4dC5cbiAgfSkpO1xuXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHN0cmVhbVRleHQoe1xuICAgIG1vZGVsOiBnb29nbGUoJ2dlbWluaS0yLjUtZmxhc2gnKSxcbiAgICBzeXN0ZW06IFNZU1RFTV9QUk9NUFQsXG4gICAgbWVzc2FnZXM6IGZvcm1hdHRlZE1lc3NhZ2VzLFxuICAgIHRlbXBlcmF0dXJlOiAwLjQsXG4gICAgdG9vbHM6IHtcbiAgICAgIHNob3dTZXJ2aWNlczogdG9vbCh7XG4gICAgICAgIGRlc2NyaXB0aW9uOiAn2LnYsdi2INmC2KfYptmF2Kkg2K7Yr9mF2KfYqiAo2KjYt9in2YLYp9iqINmF2LHYptmK2KkpINmE2YTZhdiz2KrYrtiv2YUuINin2LPYqtiu2K/ZhdmH2Kcg2LnZhtiv2YXYpyDZiti32YTYqCDYp9mE2YXYs9iq2K7Yr9mFINiq2YHYp9i12YrZhCDYudmGINin2YTYrtiv2YXYp9iqINij2Ygg2KrZiNi12YrYp9iqLicsXG4gICAgICAgIHBhcmFtZXRlcnM6IHoub2JqZWN0KHtcbiAgICAgICAgICBzZXJ2aWNlczogei5hcnJheSh6LmVudW0oWyd0aGVybWFsVGludGluZycsICdwcGYnLCAnY2VyYW1pYycsICdkZXRhaWxpbmcnXSkpLmRlc2NyaWJlKCfZgtin2KbZhdipINmF2LnYsdmB2KfYqiDYp9mE2K7Yr9mF2KfYqiDYp9mE2KrZiiDZitis2Kgg2LnYsdi22YfYpycpLFxuICAgICAgICB9KSxcbiAgICAgICAgZXhlY3V0ZTogYXN5bmMgKHsgc2VydmljZXMgfSkgPT4ge1xuICAgICAgICAgIHJldHVybiB7IHNlcnZpY2VzLCBzdGF0dXM6ICdkaXNwbGF5ZWQnIH07XG4gICAgICAgIH0sXG4gICAgICB9KSxcbiAgICB9LFxuICB9KTtcblxuICByZXR1cm4gcmVzdWx0LnRvRGF0YVN0cmVhbVJlc3BvbnNlKCk7XG59XG4iXSwibmFtZXMiOlsiY3JlYXRlR29vZ2xlR2VuZXJhdGl2ZUFJIiwic3RyZWFtVGV4dCIsInRvb2wiLCJ6IiwiZ29vZ2xlIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIkdPT0dMRV9HRU1JTklfQVBJX0tFWSIsIlNZU1RFTV9QUk9NUFQiLCJnZXRNZXNzYWdlVGV4dCIsIm1lc3NhZ2UiLCJjb250ZW50IiwiQXJyYXkiLCJpc0FycmF5IiwicGFydHMiLCJmaWx0ZXIiLCJwYXJ0IiwidHlwZSIsIm1hcCIsInRleHQiLCJqb2luIiwicnVudGltZSIsIlBPU1QiLCJyZXEiLCJtZXNzYWdlcyIsImpzb24iLCJmb3JtYXR0ZWRNZXNzYWdlcyIsInJvbGUiLCJyZXN1bHQiLCJtb2RlbCIsInN5c3RlbSIsInRlbXBlcmF0dXJlIiwidG9vbHMiLCJzaG93U2VydmljZXMiLCJkZXNjcmlwdGlvbiIsInBhcmFtZXRlcnMiLCJvYmplY3QiLCJzZXJ2aWNlcyIsImFycmF5IiwiZW51bSIsImRlc2NyaWJlIiwiZXhlY3V0ZSIsInN0YXR1cyIsInRvRGF0YVN0cmVhbVJlc3BvbnNlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/ai-support/route.ts\n");

/***/ })

});