(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[906],{426:()=>{},1839:(a,b,c)=>{"use strict";c.r(b),c.d(b,{ComponentMod:()=>I,default:()=>J});var d,e={};c.r(e),c.d(e,{handler:()=>F,patchFetch:()=>E,routeModule:()=>A,serverHooks:()=>D,workAsyncStorage:()=>B,workUnitAsyncStorage:()=>C});var f=c(7291),g=c(1136),h=c(2620),i=c(2669),j=c(1786),k=c(8393),l=c(1113),m=c(811),n=c(9304),o=c(5447),p=c(8004),q=c(3321),r=c(3722),s=c(3772),t=c(1350),u=c(6060),v=c(2205),w=c(9726),x=c(5104),y=c(7709),z=c(5356).Buffer;let A=new i.AppRouteRouteModule({definition:{kind:j.A.APP_ROUTE,page:"/api/ai-support/route",pathname:"/api/ai-support",filename:"route",bundlePath:"app/api/ai-support/route"},distDir:process.env.__NEXT_RELATIVE_DIST_DIR||"",relativeProjectDir:process.env.__NEXT_RELATIVE_PROJECT_DIR||"",resolvedPagePath:"/Users/mahmoudmac/Projects/autoshield-brilliance/src/app/api/ai-support/route.ts",nextConfigOutput:"",userland:y}),{workAsyncStorage:B,workUnitAsyncStorage:C,serverHooks:D}=A;function E(){return(0,k.V5)({workAsyncStorage:B,workUnitAsyncStorage:C})}async function F(a,b,c){var d;let e="/api/ai-support/route";"/index"===e&&(e="/");let f=await A.prepare(a,b,{srcPage:e,multiZoneDraftMode:!1});if(!f)return b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve()),null;let{buildId:g,params:h,nextConfig:i,isDraftMode:k,prerenderManifest:y,routerServerContext:B,isOnDemandRevalidate:C,revalidateOnlyGenerated:D,resolvedPathname:E}=f,F=(0,n.Y)(e),G=!!(y.dynamicRoutes[F]||y.routes[E]);if(G&&!k){let a=!!y.routes[E],b=y.dynamicRoutes[F];if(b&&!1===b.fallback&&!a)throw new w.G}let H=null;!G||A.isDev||k||(H="/index"===(H=E)?"/":H);let I=!0===A.isDev||!G,J=G&&!I,K=a.method||"GET",L=(0,m.EK)(),M=L.getActiveScopeSpan(),N={params:h,prerenderManifest:y,renderOpts:{experimental:{cacheComponents:!!i.experimental.cacheComponents,authInterrupts:!!i.experimental.authInterrupts},supportsDynamicResponse:I,incrementalCache:(0,l.Ny)(a,"incrementalCache"),cacheLifeProfiles:null==(d=i.experimental)?void 0:d.cacheLife,isRevalidate:J,waitUntil:c.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:void 0,onInstrumentationRequestError:(b,c,d)=>A.onRequestError(a,b,d,B)},sharedContext:{buildId:g}},O=new o.j(a),P=new o.p(b),Q=p.u_.fromNodeNextRequest(O,(0,p.SN)(b));try{let d=async c=>A.handle(Q,N).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=L.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==q.Li.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${K} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${K} ${a.url}`)}),f=async f=>{var g,h;let m=async({previousCacheEntry:g})=>{try{if(!(0,l.Ny)(a,"minimalMode")&&C&&D&&!g)return b.statusCode=404,b.setHeader("x-nextjs-cache","REVALIDATED"),b.end("This page could not be found"),null;let e=await d(f);a.fetchMetrics=N.renderOpts.fetchMetrics;let h=N.renderOpts.pendingWaitUntil;h&&c.waitUntil&&(c.waitUntil(h),h=void 0);let i=N.renderOpts.collectedTags;if(!G)return await (0,s.I)(O,P,e,N.renderOpts.pendingWaitUntil),null;{let a=await e.blob(),b=(0,t.Cu)(e.headers);i&&(b[v.VC]=i),!b["content-type"]&&a.type&&(b["content-type"]=a.type);let c=void 0!==N.renderOpts.collectedRevalidate&&!(N.renderOpts.collectedRevalidate>=v.AR)&&N.renderOpts.collectedRevalidate,d=void 0===N.renderOpts.collectedExpire||N.renderOpts.collectedExpire>=v.AR?void 0:N.renderOpts.collectedExpire;return{value:{kind:x.yD.APP_ROUTE,status:e.status,body:z.from(await a.arrayBuffer()),headers:b},cacheControl:{revalidate:c,expire:d}}}}catch(b){throw(null==g?void 0:g.isStale)&&await A.onRequestError(a,b,{routerKind:"App Router",routePath:e,routeType:"route",revalidateReason:(0,r.c)({isRevalidate:J,isOnDemandRevalidate:C})},B),b}},n=await A.handleResponse({req:a,nextConfig:i,cacheKey:H,routeKind:j.A.APP_ROUTE,isFallback:!1,prerenderManifest:y,isRoutePPREnabled:!1,isOnDemandRevalidate:C,revalidateOnlyGenerated:D,responseGenerator:m,waitUntil:c.waitUntil});if(!G)return null;if((null==n||null==(g=n.value)?void 0:g.kind)!==x.yD.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==n||null==(h=n.value)?void 0:h.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});(0,l.Ny)(a,"minimalMode")||b.setHeader("x-nextjs-cache",C?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),k&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let o=(0,t.p$)(n.value.headers);return(0,l.Ny)(a,"minimalMode")&&G||o.delete(v.VC),!n.cacheControl||b.getHeader("Cache-Control")||o.get("Cache-Control")||o.set("Cache-Control",(0,u.B)(n.cacheControl)),await (0,s.I)(O,P,new Response(n.value.body,{headers:o,status:n.value.status||200})),null};M?await f(M):await L.withPropagatedContext(a.headers,()=>L.trace(q.Li.handleRequest,{spanName:`${K} ${a.url}`,kind:m.v8.SERVER,attributes:{"http.method":K,"http.target":a.url}},f))}catch(b){if(b instanceof w.G||await A.onRequestError(a,b,{routerKind:"App Router",routePath:F,routeType:"route",revalidateReason:(0,r.c)({isRevalidate:J,isOnDemandRevalidate:C})}),G)throw b;return await (0,s.I)(O,P,new Response(null,{status:500})),null}}let G=null==(d=self.__RSC_MANIFEST)?void 0:d["/api/ai-support/route"],H=(a=>a?JSON.parse(a):void 0)(self.__RSC_SERVER_MANIFEST);G&&H&&(0,g.fQ)({page:"/api/ai-support/route",clientReferenceManifest:G,serverActionsManifest:H,serverModuleMap:(0,f.e)({serverActionsManifest:H})});let I=e,J=h.s.wrap(A,{nextConfig:{env:{},webpack:null,eslint:{ignoreDuringBuilds:!1},typescript:{ignoreBuildErrors:!1,tsconfigPath:"tsconfig.json"},typedRoutes:!1,distDir:".next",cleanDistDir:!0,assetPrefix:"",cacheMaxMemorySize:0x3200000,configOrigin:"next.config.mjs",useFileSystemPublicRoutes:!0,generateEtags:!0,pageExtensions:["tsx","ts","jsx","js"],poweredByHeader:!0,compress:!0,images:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",remotePatterns:[],unoptimized:!1},devIndicators:{position:"bottom-left"},onDemandEntries:{maxInactiveAge:6e4,pagesBufferLength:5},amp:{canonicalBase:""},basePath:"",sassOptions:{},trailingSlash:!1,i18n:null,productionBrowserSourceMaps:!1,excludeDefaultMomentLocales:!0,serverRuntimeConfig:{},publicRuntimeConfig:{},reactProductionProfiling:!1,reactStrictMode:!0,reactMaxHeadersLength:6e3,httpAgentOptions:{keepAlive:!0},logging:{},compiler:{},expireTime:31536e3,staticPageGenerationTimeout:60,modularizeImports:{"@mui/icons-material":{transform:"@mui/icons-material/{{member}}"},lodash:{transform:"lodash/{{member}}"}},outputFileTracingRoot:"/Users/mahmoudmac/Projects/autoshield-brilliance",experimental:{useSkewCookie:!1,cacheLife:{default:{stale:300,revalidate:900,expire:0xfffffffe},seconds:{stale:30,revalidate:1,expire:60},minutes:{stale:300,revalidate:60,expire:3600},hours:{stale:300,revalidate:3600,expire:86400},days:{stale:300,revalidate:86400,expire:604800},weeks:{stale:300,revalidate:604800,expire:2592e3},max:{stale:300,revalidate:2592e3,expire:0xfffffffe}},cacheHandlers:{},cssChunking:!0,multiZoneDraftMode:!1,appNavFailHandling:!1,prerenderEarlyExit:!0,serverMinification:!0,serverSourceMaps:!1,linkNoTouchStart:!1,caseSensitiveRoutes:!1,clientSegmentCache:!1,clientParamParsing:!1,dynamicOnHover:!1,preloadEntriesOnStart:!0,clientRouterFilter:!0,clientRouterFilterRedirects:!1,fetchCacheKeyPrefix:"",middlewarePrefetch:"flexible",optimisticClientCache:!0,manualClientBasePath:!1,cpus:7,memoryBasedWorkersCount:!1,imgOptConcurrency:null,imgOptTimeoutInSeconds:7,imgOptMaxInputPixels:0xfff8001,imgOptSequentialRead:null,imgOptSkipMetadata:null,isrFlushToDisk:!0,workerThreads:!1,optimizeCss:!1,nextScriptWorkers:!1,scrollRestoration:!1,externalDir:!1,disableOptimizedLoading:!1,gzipSize:!0,craCompat:!1,esmExternals:!0,fullySpecified:!1,swcTraceProfiling:!1,forceSwcTransforms:!1,largePageDataBytes:128e3,typedEnv:!1,parallelServerCompiles:!1,parallelServerBuildTraces:!1,ppr:!1,authInterrupts:!1,webpackMemoryOptimizations:!1,optimizeServerReact:!0,viewTransition:!1,routerBFCache:!1,removeUncaughtErrorAndRejectionListeners:!1,validateRSCRequestHeaders:!1,staleTimes:{dynamic:0,static:300},serverComponentsHmrCache:!0,staticGenerationMaxConcurrency:8,staticGenerationMinPagesPerWorker:25,cacheComponents:!1,inlineCss:!1,useCache:!1,globalNotFound:!1,devtoolSegmentExplorer:!0,browserDebugInfoInTerminal:!1,optimizeRouterScrolling:!1,middlewareClientMaxBodySize:0xa00000,optimizePackageImports:["lucide-react","date-fns","lodash-es","ramda","antd","react-bootstrap","ahooks","@ant-design/icons","@headlessui/react","@headlessui-float/react","@heroicons/react/20/solid","@heroicons/react/24/solid","@heroicons/react/24/outline","@visx/visx","@tremor/react","rxjs","@mui/material","@mui/icons-material","recharts","react-use","effect","@effect/schema","@effect/platform","@effect/platform-node","@effect/platform-browser","@effect/platform-bun","@effect/sql","@effect/sql-mssql","@effect/sql-mysql2","@effect/sql-pg","@effect/sql-sqlite-node","@effect/sql-sqlite-bun","@effect/sql-sqlite-wasm","@effect/sql-sqlite-react-native","@effect/rpc","@effect/rpc-http","@effect/typeclass","@effect/experimental","@effect/opentelemetry","@material-ui/core","@material-ui/icons","@tabler/icons-react","mui-core","react-icons/ai","react-icons/bi","react-icons/bs","react-icons/cg","react-icons/ci","react-icons/di","react-icons/fa","react-icons/fa6","react-icons/fc","react-icons/fi","react-icons/gi","react-icons/go","react-icons/gr","react-icons/hi","react-icons/hi2","react-icons/im","react-icons/io","react-icons/io5","react-icons/lia","react-icons/lib","react-icons/lu","react-icons/md","react-icons/pi","react-icons/ri","react-icons/rx","react-icons/si","react-icons/sl","react-icons/tb","react-icons/tfi","react-icons/ti","react-icons/vsc","react-icons/wi"]},htmlLimitedBots:"[\\w-]+-Google|Google-[\\w-]+|Chrome-Lighthouse|Slurp|DuckDuckBot|baiduspider|yandex|sogou|bitlybot|tumblr|vkShare|quora link preview|redditbot|ia_archiver|Bingbot|BingPreview|applebot|facebookexternalhit|facebookcatalog|Twitterbot|LinkedInBot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|Yeti|googleweblight",bundlePagesRouterDependencies:!1,configFile:"/Users/mahmoudmac/Projects/autoshield-brilliance/next.config.mjs",configFileName:"next.config.mjs",turbopack:{root:"/Users/mahmoudmac/Projects/autoshield-brilliance"}}})},5356:a=>{"use strict";a.exports=require("node:buffer")},5521:a=>{"use strict";a.exports=require("node:async_hooks")},6866:()=>{},7709:(a,b,c)=>{"use strict";c.r(b),c.d(b,{POST:()=>l,runtime:()=>k});var d=c(9794),e=c(9420),f=c(8460),g=c(7034);let h={displayServices:(0,f.z6)({description:"Display service cards with images and details when user asks about car protection services",inputSchema:g.Ik({serviceIds:g.YO(g.k5(["thermalTinting","ppf","ceramic","detailing"])).describe("Array of service IDs to display")}),execute:async function({serviceIds:a}){return{serviceIds:a}}}),displayWhyChooseUs:(0,f.z6)({description:'Display the "Why Choose Us" section when user asks about company advantages or why choose Wahag',inputSchema:g.Ik({show:g.zM().describe("Whether to show the section").default(!0)}),execute:async function({show:a}){return{show:a}}})},i=(0,d.sw)({apiKey:process.env.GOOGLE_GEMINI_API_KEY}),j=`
أنت مساعد ذكي متخصص في خدمات Wahag لحماية السيارات.
أجب دائما باللغة العربية وبأسلوب احترافي ودود ومباشر.

عندما يسأل المستخدم عن الخدمات أو يطلب توصيات:
- استخدم أداة "displayServices" لعرض بطاقات الخدمات المرئية
- قدم مقدمة قصيرة وجذابة قبل البطاقات
- لا تكرر تفاصيل الخدمات في النص بعد استخدام الأداة

عندما يسأل عن "لماذا نختار وهاج" أو "ما يميزكم" أو "مميزاتكم":
- استخدم أداة "displayWhyChooseUs" لعرض قسم المميزات بشكل مرئي جميل
- قدم رد مختصر يشجع على الاطلاع على المميزات المعروضة

الخدمات المتوفرة:
- thermalTinting: عزل حراري للنوافذ (thermal window tinting)
- ppf: فيلم الحماية الشفاف (paint protection film)
- ceramic: طلاء السيراميك (ceramic coating)
- detailing: تفصيل السيارات (car detailing)
`,k="edge";async function l(a){let{messages:b}=await a.json();return(0,e.gM)({model:i("gemini-2.5-flash"),system:j,messages:await (0,e.ut)(b),stopWhen:(0,e.wS)(5),temperature:.4,tools:h}).toUIMessageStreamResponse()}}},a=>{a.O(0,[435],()=>a(a.s=1839));var b=a.O();(_ENTRIES="undefined"==typeof _ENTRIES?{}:_ENTRIES)["middleware_app/api/ai-support/route"]=b}]);
//# sourceMappingURL=route.js.map